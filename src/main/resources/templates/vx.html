<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å†è§ï¼ğŸ†Â·æˆ‘ç™½çš„å‘†å‘†</title>
    <meta name="description" content="ç‰¹åˆ«çºªå¿µé¡µé¢ - æˆ‘ç™½çš„å‘†å‘†">
    <!-- å¾®ä¿¡åˆ†äº«å…ƒæ•°æ® -->
    <meta property="og:title" content="å†è§ï¼ğŸ†Â·æˆ‘ç™½çš„å‘†å‘†" />
    <meta property="og:description" content="ç‚¹å‡»æŸ¥çœ‹å®Œæ•´å†…å®¹ï¼Œè§è¯ç‰¹åˆ«æ—¶åˆ»" />
    <meta property="og:image" content="http://115.190.21.58:7860/vx.jpg" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://yourdomain.com/share-page" />
    <!-- å¾®ä¿¡JS-SDK -->
    <script src="https://res.wx.qq.com/open/js/jweixin-1.6.0.js"></script>
</head>
<body>
<script>
    async function fetchSignature() {
        const url = window.location.href.split('#')[0];
        const response = await fetch('/getSignature?url=' + encodeURIComponent(url));
        const data = await response.json();
        wx.config({
            debug: false,
            appId: data.appId,
            timestamp: data.timestamp,
            nonceStr: data.nonceStr,
            signature: data.signature,
            jsApiList: [
                'updateAppMessageShareData',
                'updateTimelineShareData',
                'onMenuShareAppMessage',
                'onMenuShareTimeline'
            ]
        });

        wx.ready(function () {
            alert('åˆ†äº«è®¾ç½®æˆåŠŸ');
            wx.updateAppMessageShareData({
                title: 'å†è§ï¼ğŸ†Â·æˆ‘ç™½çš„å‘†å‘† ',
                desc: '2025-05-21 17:40:31',
                link: 'http://115.190.21.58:7860/404',
                imgUrl: 'http://115.190.21.58:7860/vx.jpg',
                success: function () {
                    alert('åˆ†äº«æˆåŠŸ1ï¼');
                },
            });

            wx.updateTimelineShareData({
                title: 'å†è§ï¼ğŸ†Â·æˆ‘ç™½çš„å‘†å‘† ',
                link: 'http://115.190.21.58:7860/404',
                imgUrl: 'http://115.190.21.58:7860/vx.jpg',
                success: function () {
                    alert('åˆ†äº«æˆåŠŸ2ï¼');
                },
            });
        });

        // é”™è¯¯å¤„ç†
        wx.error(err => {
            console.error('å¾®ä¿¡SDKé”™è¯¯:', err);
            alert('åˆ†äº«åŠŸèƒ½åˆå§‹åŒ–å¤±è´¥ï¼Œè¯·åˆ·æ–°é‡è¯•');
        });

    }
    // é¡µé¢åŠ è½½åæ‰§è¡Œ
    window.addEventListener('load', fetchSignature);
</script>
</body>
</html>