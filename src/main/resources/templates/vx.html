<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>再见！🏆·我白的呆呆</title>
    <meta name="description" content="特别纪念页面 - 我白的呆呆">
    <!-- 微信分享元数据 -->
    <meta property="og:title" content="再见！🏆·我白的呆呆" />
    <meta property="og:description" content="点击查看完整内容，见证特别时刻" />
    <meta property="og:image" content="http://115.190.21.58:7860/vx.jpg" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://yourdomain.com/share-page" />
    <!-- 微信JS-SDK -->
    <script src="https://res.wx.qq.com/open/js/jweixin-1.6.0.js"></script>
</head>
<body>
<script>
    async function fetchSignature() {
        const url = window.location.href.split('#')[0];
        const response = await fetch('/getSignature?url=' + encodeURIComponent(url));
        const data = await response.json();
        wx.config({
            debug: false,
            appId: data.appId,
            timestamp: data.timestamp,
            nonceStr: data.nonceStr,
            signature: data.signature,
            jsApiList: [
                'updateAppMessageShareData',
                'updateTimelineShareData',
                'onMenuShareAppMessage',
                'onMenuShareTimeline'
            ]
        });

        wx.ready(function () {
            alert('分享设置成功');
            wx.updateAppMessageShareData({
                title: '再见！🏆·我白的呆呆 ',
                desc: '2025-05-21 17:40:31',
                link: 'http://115.190.21.58:7860/404',
                imgUrl: 'http://115.190.21.58:7860/vx.jpg',
                success: function () {
                    alert('分享成功1！');
                },
            });

            wx.updateTimelineShareData({
                title: '再见！🏆·我白的呆呆 ',
                link: 'http://115.190.21.58:7860/404',
                imgUrl: 'http://115.190.21.58:7860/vx.jpg',
                success: function () {
                    alert('分享成功2！');
                },
            });
        });

        // 错误处理
        wx.error(err => {
            console.error('微信SDK错误:', err);
            alert('分享功能初始化失败，请刷新重试');
        });

    }
    // 页面加载后执行
    window.addEventListener('load', fetchSignature);
</script>
</body>
</html>